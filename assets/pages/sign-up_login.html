<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SlopeScout | Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        /* --- Global & Variable Styles --- */
        :root {
            --primary-dark: #0a0a0a; --secondary-dark: #111111; --card-bg: #1c1c1e;
            --card-border: rgba(255, 255, 255, 0.08); --text-light: #f0f0f0;
            --text-secondary: rgba(235, 235, 245, 0.6); --accent-blue: #007aff;
            --accent-blue-hover: #0056b3; --error-red: #d32f2f; --success-green: #388e3c;
            --input-bg: #2c2c2e; --transition-speed: 0.3s;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; }
        html { scroll-behavior: smooth; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; margin: 0; padding: 20px;
            background-color: var(--primary-dark); color: var(--text-light);
            padding-top: 80px; /* Add padding to prevent content from hiding under fixed nav */
        }

        /* --- Navigation Bar Styles (from explore.html) --- */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px; /* Adjusted padding */
            z-index: 100;
            background: linear-gradient(to bottom, rgba(10, 10, 10, 0.8) 0%, rgba(10, 10, 10, 0) 100%);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: var(--text-light);
        }
        .logo {
            font-size: 24px; font-weight: 600; letter-spacing: -0.5px; cursor: pointer;
            transition: transform 0.3s ease; color: var(--text-light); text-decoration: none;
        }
        .logo:hover { transform: scale(1.05); }
        .nav-links { display: flex; gap: 40px; } /* Ensure this is 'flex' */
        .nav-links a {
            color: var(--text-light); text-decoration: none; font-size: 14px; font-weight: 500;
            transition: opacity 0.3s ease, transform 0.3s ease; position: relative; padding-bottom: 4px;
        }
        .nav-links a::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 1.5px;
            background-color: var(--accent-blue); transform: scaleX(0);
            transform-origin: left; transition: transform 0.3s ease-out;
        }
        .nav-links a:hover { opacity: 1; transform: translateY(-2px); }
        .nav-links a:hover::after { transform: scaleX(1); }
        /* --- END: Navigation Bar Styles --- */

        /* --- Login/Signup Container Styles --- */
        .container {
            position: relative; background-color: var(--card-bg);
            border: 1px solid var(--card-border); border-radius: 12px;
            padding: 35px; width: 100%; max-width: 400px;
            min-height: 450px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /* --- Login/Signup Form Styles --- */
        #login-form, #signup-form, #reset-password-form { position: absolute; top: 0; left: 0; right: 0; bottom: 0; padding: 35px; display: flex; flex-direction: column; justify-content: center; }
        h1 { text-align: center; margin: 0 0 30px 0; color: var(--text-light); font-weight: 600; font-size: 1.8em; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 500; font-size: 0.9em; color: var(--text-secondary); }
        input[type="email"], input[type="password"] { width: 100%; padding: 12px 15px; border: 1px solid var(--card-border); border-radius: 8px; box-sizing: border-box; background-color: var(--input-bg); color: var(--text-light); font-size: 1em; transition: border-color var(--transition-speed), box-shadow var(--transition-speed); }
        input[type="email"]:focus, input[type="password"]:focus { outline: none; border-color: var(--accent-blue); box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.3); }
        button[type="submit"] { width: 100%; padding: 12px; background-color: var(--accent-blue); border: none; border-radius: 30px; color: white; font-size: 1em; font-weight: 600; cursor: pointer; margin-top: 15px; transition: background-color var(--transition-speed), transform var(--transition-speed); }
        button[type="submit"]:hover { background-color: var(--accent-blue-hover); transform: scale(1.02); }
        .forgot-password { text-align: right; font-size: 0.85em; margin-top: 8px; }
        .forgot-password a, .form-toggle a { color: var(--accent-blue); text-decoration: none; cursor: pointer; }
        .forgot-password a:hover, .form-toggle a:hover { color: var(--accent-blue-hover); text-decoration: underline; }
        .form-toggle { text-align: center; margin-top: 25px; font-size: 0.9em; color: var(--text-secondary); }
        @keyframes fadeDownOut { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(20px); } }
        @keyframes fadeUpIn { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }
        .form-animate-out { animation: fadeDownOut 0.4s ease forwards; pointer-events: none; }
        .form-animate-in { animation: fadeUpIn 0.4s ease forwards; }
        #login-form { display: flex; }
        #signup-form { display: none; }
        #reset-password-form { display: none; }
        .error-message { color: var(--error-red); font-size: 0.85em; margin-top: 8px; display: none; text-align: center; }
        .success-message { color: var(--success-green); font-size: 0.85em; margin-top: 8px; display: none; text-align: center; }

        /* --- Responsive Styles --- */
        @media (max-width: 991.98px) {
            /* Hide nav links on smaller screens by default in explore.html */
            .nav-links { display: none; }
        }
        @media (max-width: 768px) {
            body { padding-top: 70px; } /* Adjust padding for smaller nav */
            nav { padding: 15px 30px; }
            h1 { font-size: 1.7em; }
        }
        @media (max-width: 576px) {
            body { padding-top: 60px; } /* Adjust padding for smallest nav */
            nav { padding: 15px 20px; }
            .logo { font-size: 20px; }
            .container { padding: 25px; max-width: 95%;}
            h1 { font-size: 1.6em; }
            button[type="submit"] { padding: 11px; font-size: 0.95em; }
            input[type="email"], input[type="password"] { padding: 11px 14px; font-size: 0.95em;}
            .form-toggle, .forgot-password { font-size: 0.8em;}
        }
    </style>
</head>
<body>

<nav>
    <a href="https://slopescout.org" rel="noopener noreferrer" class="logo">SlopeScout</a>
    <div class="nav-links">
        <a href="https://slopescout.org" rel="noopener noreferrer">Home</a>
        <a href="explore.html">Explore</a>
        <a href="bookmarks.html">Bookmarks</a>
        <a href="profile.html">Profile</a>
    </div>
</nav>

<div class="container">
    <div id="signup-form"> <div> <h1>Create Account</h1> <form id="signup-form-element"> <div class="form-group"> <label for="signup-email">Email</label> <input type="email" id="signup-email" required autocomplete="email"> </div> <div class="form-group"> <label for="signup-password">Password</label> <input type="password" id="signup-password" required autocomplete="new-password"> </div> <div class="form-group"> <label for="confirm-password">Confirm Password</label> <input type="password" id="confirm-password" required autocomplete="new-password"> </div> <div class="error-message" id="signup-error"></div> <div class="success-message" id="signup-success"></div> <button type="submit">Sign Up</button> </form> <div class="form-toggle"> Already have an account? <a href="#" id="show-login">Log In</a> </div> </div> </div>
    <div id="login-form"> <div> <h1>Log In</h1> <form id="login-form-element"> <div class="form-group"> <label for="login-email">Email</label> <input type="email" id="login-email" required autocomplete="email"> </div> <div class="form-group"> <label for="login-password">Password</label> <input type="password" id="login-password" required autocomplete="current-password"> <div class="forgot-password"> <a href="#" id="forgot-password-link">Forgot password?</a> </div> </div> <div class="error-message" id="login-error"></div> <div class="success-message" id="login-success"></div> <button type="submit">Login</button> </form> <div class="form-toggle"> Need an account? <a href="#" id="show-signup">Create Account</a> </div> </div> </div>
    <div id="reset-password-form"> <div> <h1>Reset Password</h1> <form id="reset-password-form-element"> <div class="form-group"> <label for="reset-email">Enter your account email</label> <input type="email" id="reset-email" required autocomplete="email"> </div> <div class="error-message" id="reset-error"></div> <div class="success-message" id="reset-success"></div> <button type="submit">Send Reset Link</button> </form> <div class="form-toggle"> <a href="#" id="show-login-from-reset">Back to Log In</a> </div> </div> </div>
</div>

<script type="module">
    // Login/Signup Javascript Logic (remains the same)
    console.log("Login script starting...");
    const configPath = '../firebase/config.js'; // Ensure path is correct
    try {
        const { auth } = await import(configPath);
        const { createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail, onAuthStateChanged } = await import("https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js");

        // --- Element References ---
        const signupFormDiv = document.getElementById('signup-form');
        const loginFormDiv = document.getElementById('login-form');
        const resetPasswordFormDiv = document.getElementById('reset-password-form');
        const signupFormElement = document.getElementById('signup-form-element');
        const loginFormElement = document.getElementById('login-form-element');
        const resetPasswordFormElement = document.getElementById('reset-password-form-element');
        const forgotPasswordLink = document.getElementById('forgot-password-link');
        const signupEmailInput = document.getElementById('signup-email');
        const signupPasswordInput = document.getElementById('signup-password');
        const confirmPasswordInput = document.getElementById('confirm-password');
        const loginEmailInput = document.getElementById('login-email');
        const loginPasswordInput = document.getElementById('login-password');
        const resetEmailInput = document.getElementById('reset-email');
        const signupError = document.getElementById('signup-error');
        const signupSuccess = document.getElementById('signup-success');
        const loginError = document.getElementById('login-error');
        const loginSuccess = document.getElementById('login-success');
        const resetError = document.getElementById('reset-error');
        const resetSuccess = document.getElementById('reset-success');
        const showLoginLink = document.getElementById('show-login');
        const showSignupLink = document.getElementById('show-signup');
        const showLoginFromResetLink = document.getElementById('show-login-from-reset');

        // --- Helper Functions ---
        const clearMessages = () => { /* ... */ }; // Assume implementation exists
        const showMessage = (element, message, isError = true) => { /* ... */ }; // Assume implementation exists

        // --- Firebase Logic ---
        if (signupFormElement) { signupFormElement.addEventListener('submit', (e) => { /* ... */ }); } // Assume implementation exists
        if (loginFormElement) { loginFormElement.addEventListener('submit', (e) => { /* ... */ }); } // Assume implementation exists
        if (resetPasswordFormElement) { resetPasswordFormElement.addEventListener('submit', (e) => { /* ... */ }); } // Assume implementation exists
        onAuthStateChanged(auth, (user) => { /* ... */ }); // Assume implementation exists

        // --- Animation & Toggle Logic ---
        let currentForm = loginFormDiv;
        let animationInProgress = false;
        const switchForms = (formToHide, formToShow) => { /* ... */ } // Assume implementation exists
        if (showSignupLink) { showSignupLink.addEventListener('click', (e) => { e.preventDefault(); switchForms(currentForm, signupFormDiv); }); }
        if (showLoginLink) { showLoginLink.addEventListener('click', (e) => { e.preventDefault(); switchForms(currentForm, loginFormDiv); }); }
        if (forgotPasswordLink) { forgotPasswordLink.addEventListener('click', (e) => { e.preventDefault(); if(loginEmailInput.value) { resetEmailInput.value = loginEmailInput.value; } switchForms(currentForm, resetPasswordFormDiv); }); }
        if (showLoginFromResetLink) { showLoginFromResetLink.addEventListener('click', (e) => { e.preventDefault(); switchForms(currentForm, loginFormDiv); }); }

        console.log("Login script finished setup.");
    } catch (error) {
        console.error("Initialization Error:", error);
        alert("Failed to initialize page. Please check the console for errors.");
    }
</script>
</body>
</html>